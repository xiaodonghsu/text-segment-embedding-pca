# RAG可视化教学系统

一个用于教学的RAG（检索增强生成）可视化系统，帮助学员理解文本分段、向量化、PCA降维和相似度计算的完整流程。

## 🎯 功能特性

### 核心功能
- **文本分段**: 支持200/500字符长度，可调节重叠度(0-100%)
- **向量化**: 集成阿里云text-embedding-v4 API，生成1024维向量
- **PCA降维**: 使用scikit-learn将高维向量降维到2D可视化
- **交互式可视化**: Plotly绘制的散点图，清晰标记分段ID
- **问题查询**: 用户输入问题，系统找到最相关分段并用不同颜色显示
- **相似度矩阵**: 完整的分段间余弦相似度计算和热力图展示

### 教学设计
- 📚 **分步骤操作**: 5个标签页引导完整RAG流程
- 🎯 **实时反馈**: 进度条、状态提示、错误处理
- 📊 **丰富可视化**: PCA散点图、相似度热力图、数值矩阵
- ⚙️ **参数配置**: 侧边栏实时调整分段参数

## 🚀 快速开始

### 环境要求
- Python 3.8+
- 阿里云DashScope API密钥

### 安装依赖
```bash
pip install -r requirements.txt
```

### 运行系统
```bash
streamlit run app.py --server.port 8501 --server.address 0.0.0.0
```

然后在浏览器中访问 `http://localhost:8501`

## 📖 使用指南

### 1. 文本输入与分段
- 在"文本输入"标签页输入长文本
- 配置分段长度（200/500字符）和重叠度
- 点击"处理文本"生成分段

### 2. 查看分段结果
- 在"分段结果"标签页查看所有生成的文本分段
- 每个分段显示ID、长度和内容

### 3. 向量化与可视化
- 在"向量可视化"标签页点击"生成向量并可视化"
- 系统调用embedding API生成向量
- 自动执行PCA降维并显示2D散点图

### 4. 问题查询
- 在"问题查询"标签页输入问题
- 系统计算问题与各分段的相似度
- 显示最相关的前3个分段

### 5. 相似度分析
- 在"相似度矩阵"标签页查看分段间相似度
- 热力图和数值矩阵双重展示

## 🛠️ 技术架构

- **前端**: Streamlit Web应用框架
- **可视化**: Plotly交互式图表
- **机器学习**: scikit-learn (PCA降维)
- **向量化**: 阿里云DashScope text-embedding-v4
- **数据处理**: NumPy, Pandas

## 📝 配置说明

### API配置
系统支持在侧边栏动态配置Embedding API：

1. **Base URL**: 设置embedding API的基础URL地址
   - 默认：`https://dashscope.aliyuncs.com/compatible-mode/v1/embeddings`
   - 支持其他兼容OpenAI格式的embedding API

2. **API Key**: 输入您的API密钥
   - 必填项，系统会验证是否已配置
   - 使用密码输入框保护隐私

3. **模型名称**: 指定使用的embedding模型
   - 默认：`text-embedding-v4`
   - 可根据API提供商调整

### 数据管理
- **清除数据**: 一键清除所有处理过的数据
- **状态监控**: 实时显示系统处理状态

### 参数调整
- **分段长度**: 200或500字符
- **重叠度**: 0-100%，推荐50%
- **PCA组件**: 固定为2维用于可视化

## 🎓 教学价值

这个系统特别适合：
- RAG技术原理教学
- 向量数据库概念演示
- 文本相似度计算理解
- 机器学习降维可视化
- 信息检索系统入门

## 📄 许可证

MIT License

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个教学系统！

## 📞 联系方式

如有问题或建议，请通过GitHub Issues联系。